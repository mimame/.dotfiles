# Helix Language Configuration
# This file ensures Helix uses the tools provided by NixOS, matching your LazyVim setup.

[[language]]
name = "nix"
language-servers = ["nixd"]
formatter = { command = "nixfmt" }
auto-format = true

[[language]]
name = "rust"
language-servers = ["rust-analyzer"]
auto-format = true

[[language]]
name = "toml"
language-servers = ["taplo"]
formatter = { command = "taplo", arguments = ["format", "-"] }
auto-format = true

[[language]]
name = "python"
language-servers = ["ruff", "pyright"]
auto-format = true

[[language]]
name = "lua"
language-servers = ["lua-language-server"]
formatter = { command = "stylua", arguments = [
  "--indent-width",
  "2",
  "--indent-type",
  "Spaces",
  "-",
] }
auto-format = true

[[language]]
name = "bash"
language-servers = ["bash-language-server"]
formatter = { command = "shfmt", arguments = ["-i", "2"] }
auto-format = true

[[language]]
name = "go"
language-servers = ["gopls"]
formatter = { command = "goimports" }
auto-format = true

[[language]]
name = "sql"
language-servers = ["sqlfluff"]
formatter = { command = "sqlfluff", arguments = ["format", "-"] }
auto-format = true

[[language]]
name = "markdown"
language-servers = ["marksman"]
formatter = { command = "markdownlint-cli2" }
auto-format = true

[[language]]
name = "yaml"
language-servers = ["yaml-language-server"]
formatter = { command = "yamlfmt" }
auto-format = true

[[language]]
name = "json"
language-servers = ["vscode-json-language-server"]
formatter = { command = "jsonfmt" }
auto-format = true

[[language]]
name = "zig"
language-servers = ["zls"]
auto-format = true

[[language]]
name = "elixir"
language-servers = ["elixir-ls"]
auto-format = true

[[language]]
name = "typst"
language-servers = ["tinymist"]
formatter = { command = "typstyle", arguments = ["format", "-"] }
auto-format = true

[[language]]
name = "typescript"
language-servers = ["typescript-language-server"]
formatter = { command = "biome", arguments = [
  "format",
  "--stdin-file-path",
  "file.ts",
] }
auto-format = true

[[language]]
name = "javascript"
language-servers = ["typescript-language-server"]
formatter = { command = "biome", arguments = [
  "format",
  "--stdin-file-path",
  "file.js",
] }
auto-format = true

[[language]]
name = "html"
language-servers = ["vscode-html-language-server"]
formatter = { command = "biome", arguments = [
  "format",
  "--stdin-file-path",
  "file.html",
] }
auto-format = true

[[language]]
name = "css"
language-servers = ["vscode-css-language-server"]
formatter = { command = "biome", arguments = [
  "format",
  "--stdin-file-path",
  "file.css",
] }
auto-format = true

[[language]]
name = "ruby"
language-servers = ["ruby-lsp"]
formatter = { command = "rubocop", arguments = [
  "--auto-correct",
  "--stdin",
  "filename",
] }
auto-format = true

[language-server.nixd]
command = "nixd"

[language-server.nixd.settings]
nixpkgs = { expr = "import <nixpkgs> { }" }
formatting = { command = ["nixfmt"] }

[language-server.ruff]
command = "ruff"
args = ["server"]

[language-server.pyright]
command = "pyright-langserver"
args = ["--stdio"]

[language-server.sqlfluff]
command = "sqlfluff"
args = ["serve"]
